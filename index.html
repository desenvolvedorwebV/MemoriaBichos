<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da MemÃ³ria com Bichos</title>
<style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    touch-action: none;
  }

  * {
    user-select: none;
    -webkit-user-drag: none;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #111, #333);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100dvh;
  }

  #hud {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 400px;
    margin-bottom: 20px;
    font-size: 1.2em;
  }

  #sound-btn {
    cursor: pointer;
    font-size: 1.4em;
    transition: transform 0.2s, opacity 0.2s;
  }
  #sound-btn:hover { transform: scale(1.2); opacity: 0.8; }

  #message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.7);
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(255,215,0,0.5);
    font-size: 1.4em;
    text-align: center;
    color: #fff;
    opacity: 0;
    transition: opacity 0.5s;
    z-index: 1000;
    pointer-events: none;
  }
  #message.visible { opacity: 1; }

  #game {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    width: 100%;
    max-width: 400px;
    justify-items: center;
  }

  .circle {
    position: relative;
    width: 100%;
    aspect-ratio: 1/1;
    border-radius: 50%;
    perspective: 1000px;
    cursor: pointer;
  }

  .inner {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    transition: transform 0.5s;
    transform-style: preserve-3d;
  }

  .circle.flipped .inner { transform: rotateY(180deg); }

  .front, .back {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
  }

  .front {
    background: #ccc;
    color: #000;
    transform: rotateY(180deg);
  }

  .back { background: #555; }

  .correct .front { background: #4caf50; color: white; }
  .wrong .front { background: #e53935; color: white; }

  @keyframes shake {
    0%,100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }
  .shake { animation: shake 0.3s; }

  .particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, gold, transparent);
    border-radius: 50%;
    pointer-events: none;
    opacity: 0;
    animation: sparkle 1s ease-out forwards;
  }

  @keyframes sparkle {
    0% { transform: scale(0.3) translate(0,0); opacity: 1; }
    100% { transform: scale(0.8) translate(var(--x),var(--y)); opacity: 0; }
  }

  #footer {
    margin-top: auto;
    text-align: center;
    font-size: 0.9em;
    color: #fff;
    opacity: 0.8;
    padding: 10px 0;
    width: 100%;
    background: rgba(0, 0, 0, 0.2);
  }
</style>
</head>
<body>
  <div id="hud">
    <div id="level">NÃ­vel:<br>1</div>
    <div id="timer">Tempo:<br>200</div>
    <div id="tries">Tentativas:<br>100</div>
    <div id="sound-btn" title="Ativar/Desativar Som">ðŸ”Š</div>
  </div>

  <div id="message"></div>
  <div id="game"></div>
  <footer id="footer">Â© 2025 Viniciusav</footer>

  <script>
    const game = document.getElementById('game');
    const levelDisplay = document.getElementById('level');
    const timerDisplay = document.getElementById('timer');
    const triesDisplay = document.getElementById('tries');
    const message = document.getElementById('message');
    const soundBtn = document.getElementById('sound-btn');

    let level = 1, tries = 100, time = 200;
    let totalEmojis = 6;
    let timer;
    let soundEnabled = true;
    let waitingEmoji = null;
    let found = new Set();
    let emojis = [];

    const allEmojis = ['ðŸ¶','ðŸ±','ðŸ­','ðŸ¹','ðŸ°','ðŸ¦Š','ðŸ»','ðŸ¼','ðŸ¸','ðŸµ','ðŸ¤','ðŸ¦„','ðŸ™','ðŸ','ðŸž','ðŸ¦‹','ðŸ¢','ðŸ¦•','ðŸ ','ðŸ§','ðŸ¯','ðŸ¦'];

    soundBtn.addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      soundBtn.textContent = soundEnabled ? 'ðŸ”Š' : 'ðŸ”‡';
    });

    function startGame() {
      game.innerHTML = '';
      message.classList.remove('visible');
      found.clear();
      totalEmojis = Math.min(6 + Math.floor((level - 1) / 5), 12);
      emojis = shuffle(allEmojis).slice(0, totalEmojis);

      emojis.forEach((emoji, i) => {
        const circle = document.createElement('div');
        circle.className = 'circle';
        circle.innerHTML = `
          <div class="inner">
            <div class="front">${emoji}</div>
            <div class="back"></div>
          </div>`;
        circle.dataset.emoji = emoji;
        circle.addEventListener('click', () => handleClick(circle));
        game.appendChild(circle);
      });

      revealAllThenHide();
      resetTimer();
    }

    function revealAllThenHide() {
      document.querySelectorAll('.circle').forEach(c => c.classList.add('flipped'));
      setTimeout(() => {
        document.querySelectorAll('.circle').forEach(c => c.classList.remove('flipped'));
        nextRequest();
      }, 2000);
    }

    function nextRequest() {
      const remaining = emojis.filter(e => !found.has(e));
      if (remaining.length === 0) return levelComplete();
      waitingEmoji = remaining[Math.floor(Math.random() * remaining.length)];
      //const narrator = remaining[Math.floor(Math.random() * remaining.length)];
      //showMessage(`${narrator} quer que vocÃª encontre ${waitingEmoji}`);
      showMessage(`Encontre: ${waitingEmoji}`);
    }

    function handleClick(circle) {
      const emoji = circle.dataset.emoji;
      if (found.has(emoji)) return;
      circle.classList.add('flipped');

      if (emoji === waitingEmoji) {
        playSound('certo');
        circle.classList.add('correct');
        found.add(emoji);
        spawnParticles(40);
        if (found.size === emojis.length) levelComplete();
        else setTimeout(nextRequest, 800);
      } else {
        playSound('errado');
        circle.classList.add('wrong');
        tries--;
        triesDisplay.innerHTML = `Tentativas:<br>${tries}`;
        if (tries <= 0) return gameOver();
        setTimeout(() => {
          circle.classList.remove('flipped', 'wrong');
        }, 600);
      }
    }

    function showMessage(text) {
      message.textContent = text;
      message.classList.add('visible');
      setTimeout(() => message.classList.remove('visible'), 2000);
    }

    function levelComplete() {
      clearInterval(timer);
      playSound('levelcompleto');
      showMessage(`ðŸŽ‰ NÃ­vel ${level} completo!`);
      spawnParticles(70);
      setTimeout(() => {
        level++;
        levelDisplay.innerHTML = `NÃ­vel:<br>${level}`;
        startGame();
      }, 1800);
    }

    function gameOver() {
      clearInterval(timer);
      alert('Fim de jogo!');
      resetAll();
    }

    function resetTimer() {
      clearInterval(timer);
      time = 200;
      timerDisplay.innerHTML = `Tempo:<br>${time}`;
      timer = setInterval(() => {
        time--;
        timerDisplay.innerHTML = `Tempo:<br>${time}`;
        if (time <= 0) {
          clearInterval(timer);
          alert('Tempo esgotado!');
          resetAll();
        }
      }, 1000);
    }

    function resetAll() {
      level = 1;
      tries = 100;
      levelDisplay.innerHTML = `NÃ­vel:<br>${level}`;
      triesDisplay.innerHTML = `Tentativas:<br>${tries}`;
      startGame();
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function playSound(name) {
      if (!soundEnabled) return;
      const audio = new Audio(`${name}.mp3`);
      audio.play().catch(()=>{});
    }

    function spawnParticles(amount) {
      for (let i = 0; i < amount; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const angle = Math.random() * 2 * Math.PI;
        const dist = 60 + Math.random() * 60;
        const x = Math.cos(angle) * dist + 'px';
        const y = Math.sin(angle) * dist + 'px';
        p.style.setProperty('--x', x);
        p.style.setProperty('--y', y);
        p.style.left = '50%';
        p.style.top = '50%';
        p.style.transform = 'translate(-50%, -50%)';
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 1000);
      }
    }

    startGame();
  </script>
</body>
</html>
